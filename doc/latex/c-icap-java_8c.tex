\hypertarget{c-icap-java_8c}{\section{src/modules/java/c-\/icap-\/java.c File Reference}
\label{c-icap-java_8c}\index{src/modules/java/c-\/icap-\/java.\+c@{src/modules/java/c-\/icap-\/java.\+c}}
}


c-\/icap module for java handler  


{\ttfamily \#include $<$stdio.\+h$>$}\\*
{\ttfamily \#include $<$stdlib.\+h$>$}\\*
{\ttfamily \#include $<$sys/types.\+h$>$}\\*
{\ttfamily \#include $<$unistd.\+h$>$}\\*
{\ttfamily \#include \char`\"{}jni.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}c\+\_\+icap/c-\/icap.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}c\+\_\+icap/service.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}c\+\_\+icap/module.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}c\+\_\+icap/header.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}c\+\_\+icap/body.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}c\+\_\+icap/simple\+\_\+api.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}c\+\_\+icap/debug.\+h\char`\"{}}\\*
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structj_data_struct}{j\+Data\+Struct}
\item 
struct \hyperlink{structj_service_data_struct}{j\+Service\+Data\+Struct}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\hypertarget{c-icap-java_8c_ab367ee8760db972006b62725295661cd}{\#define {\bfseries C\+I\+J\+\_\+\+E\+R\+R\+O\+R\+\_\+\+L\+E\+V\+E\+L}~1}\label{c-icap-java_8c_ab367ee8760db972006b62725295661cd}

\item 
\hypertarget{c-icap-java_8c_a8ef2d46d7ed8867a30fe802d07e20571}{\#define {\bfseries C\+I\+J\+\_\+\+W\+A\+R\+N\+\_\+\+L\+E\+V\+E\+L}~3}\label{c-icap-java_8c_a8ef2d46d7ed8867a30fe802d07e20571}

\item 
\hypertarget{c-icap-java_8c_af836531b96b53ace27bb64a9a4bd0b11}{\#define {\bfseries C\+I\+J\+\_\+\+M\+E\+S\+S\+A\+G\+E\+\_\+\+L\+E\+V\+E\+L}~5}\label{c-icap-java_8c_af836531b96b53ace27bb64a9a4bd0b11}

\item 
\hypertarget{c-icap-java_8c_a109eedc732646aaff59049f2dbb4ae9c}{\#define {\bfseries C\+I\+J\+\_\+\+I\+N\+F\+O\+\_\+\+L\+E\+V\+E\+L}~7}\label{c-icap-java_8c_a109eedc732646aaff59049f2dbb4ae9c}

\item 
\hypertarget{c-icap-java_8c_a9f05f1bc20d887fd6e78bcb7eb4bd715}{\#define {\bfseries C\+I\+J\+\_\+\+D\+E\+B\+U\+G\+\_\+\+L\+E\+V\+E\+L}~C\+I\+\_\+\+D\+E\+B\+U\+G\+\_\+\+L\+E\+V\+E\+L}\label{c-icap-java_8c_a9f05f1bc20d887fd6e78bcb7eb4bd715}

\item 
\hypertarget{c-icap-java_8c_abcb9f48a8b94e3103fb9c74c57a3ceff}{\#define {\bfseries cij\+\_\+debug\+\_\+printf}(lev, msg,...)~ci\+\_\+debug\+\_\+printf(1, \char`\"{}(\%d)\+:\%s()\+:L\%04d\+: \char`\"{}msg\char`\"{}\textbackslash{}n\char`\"{}, getpid(), \+\_\+\+\_\+func\+\_\+\+\_\+, \+\_\+\+\_\+\+L\+I\+N\+E\+\_\+\+\_\+, \#\# \+\_\+\+\_\+\+V\+A\+\_\+\+A\+R\+G\+S\+\_\+\+\_\+)}\label{c-icap-java_8c_abcb9f48a8b94e3103fb9c74c57a3ceff}

\item 
\hypertarget{c-icap-java_8c_aa0f5d10e300c2541ddf444ce17970eac}{\#define {\bfseries M\+A\+X\+\_\+\+J\+V\+M\+\_\+\+O\+P\+T\+I\+O\+N\+S}~4}\label{c-icap-java_8c_aa0f5d10e300c2541ddf444ce17970eac}

\item 
\hypertarget{c-icap-java_8c_a32edc6d3772795c010edf7dfca20d368}{\#define {\bfseries M\+A\+X\+\_\+\+E\+N\+V\+I\+R\+O\+N\+M\+E\+N\+T\+S\+\_\+\+S\+I\+Z\+E}~256}\label{c-icap-java_8c_a32edc6d3772795c010edf7dfca20d368}

\item 
\hypertarget{c-icap-java_8c_a01981b820f93d8b5cc748cd6d45d065a}{\#define {\bfseries C\+I\+J\+\_\+\+C\+L\+A\+S\+S\+\_\+\+M\+O\+D\+\_\+\+T\+Y\+P\+E}~\char`\"{}M\+O\+D\+\_\+\+T\+Y\+P\+E\char`\"{}}\label{c-icap-java_8c_a01981b820f93d8b5cc748cd6d45d065a}

\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
\hypertarget{c-icap-java_8c_a170722895fb8b557e85e1445db641676}{typedef struct \hyperlink{structj_data_struct}{j\+Data\+Struct} {\bfseries j\+Data\+\_\+t}}\label{c-icap-java_8c_a170722895fb8b557e85e1445db641676}

\item 
\hypertarget{c-icap-java_8c_a37e1c2a527fdd42e6dd88c45441bdf0c}{typedef struct \hyperlink{structj_service_data_struct}{j\+Service\+Data\+Struct} {\bfseries j\+Service\+Data\+\_\+t}}\label{c-icap-java_8c_a37e1c2a527fdd42e6dd88c45441bdf0c}

\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{c-icap-java_8c_a8608028d6507eaa054dbfdda13263da9}{init\+\_\+java\+\_\+handler} (struct ci\+\_\+server\+\_\+conf $\ast$server\+\_\+conf)
\item 
int \hyperlink{c-icap-java_8c_a472cf4c2c9280417823c49e3919bbf9b}{post\+\_\+init\+\_\+java\+\_\+handler} (struct ci\+\_\+server\+\_\+conf $\ast$server\+\_\+conf)
\item 
ci\+\_\+service\+\_\+module\+\_\+t $\ast$ \hyperlink{c-icap-java_8c_ac0e05d829e840acc75d0980ae4a51bd5}{load\+\_\+java\+\_\+module} (char $\ast$service\+\_\+file)
\item 
void \hyperlink{c-icap-java_8c_a92dca6f4495d51ed83d22cbd9d96d143}{release\+\_\+java\+\_\+handler} ()
\item 
int \hyperlink{c-icap-java_8c_a09348decf68c68ed0e477f4ead7d758f}{java\+\_\+init\+\_\+service} (ci\+\_\+service\+\_\+xdata\+\_\+t $\ast$srv\+\_\+xdata, struct ci\+\_\+server\+\_\+conf $\ast$server\+\_\+conf)
\item 
int \hyperlink{c-icap-java_8c_a45697ae9db4c5c4e3c5573fc0add243a}{java\+\_\+post\+\_\+init\+\_\+service} (ci\+\_\+service\+\_\+xdata\+\_\+t $\ast$srv\+\_\+xdata, struct ci\+\_\+server\+\_\+conf $\ast$server\+\_\+conf)
\item 
void \hyperlink{c-icap-java_8c_a6e0dd60d19e7bcafde11ee9fb4c81d4c}{java\+\_\+close\+\_\+service} ()
\item 
void $\ast$ \hyperlink{c-icap-java_8c_aa8e4298bbc55ca26285ae6d809d04757}{java\+\_\+init\+\_\+request\+\_\+data} (ci\+\_\+request\+\_\+t $\ast$req)
\item 
void \hyperlink{c-icap-java_8c_a757cc7a55bf2ec3cb4720e757ac18005}{java\+\_\+release\+\_\+request\+\_\+data} (void $\ast$data)
\item 
int \hyperlink{c-icap-java_8c_aab52a5dff6e8d20196700fe42bb32d16}{java\+\_\+check\+\_\+preview\+\_\+handler} (char $\ast$preview\+\_\+data, int preview\+\_\+data\+\_\+len, ci\+\_\+request\+\_\+t $\ast$req)
\item 
int \hyperlink{c-icap-java_8c_a7ba64ed6445f034ba77bec0dffee7bc7}{java\+\_\+end\+\_\+of\+\_\+data\+\_\+handler} (ci\+\_\+request\+\_\+t $\ast$req)
\item 
int \hyperlink{c-icap-java_8c_aad97b7706dcf8f8548285de4f9cba49a}{java\+\_\+service\+\_\+io} (char $\ast$wbuf, int $\ast$wlen, char $\ast$rbuf, int $\ast$rlen, int iseof, ci\+\_\+request\+\_\+t $\ast$req)
\item 
int \hyperlink{c-icap-java_8c_a2de36ee3aca6f4adfb39b1b77ae64025}{kill\+V\+M} (void $\ast$data, const char $\ast$name, const void $\ast$value)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
C\+I\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+D\+A\+T\+A \\*
service\+\_\+handler\+\_\+module\+\_\+t \hyperlink{c-icap-java_8c_a13726af7b2896986044c777506196c76}{module}
\item 
\hypertarget{c-icap-java_8c_ab5569ffeead7850d0eb4861e65a43f54}{ci\+\_\+dyn\+\_\+array\+\_\+t $\ast$ {\bfseries enviroments}}\label{c-icap-java_8c_ab5569ffeead7850d0eb4861e65a43f54}

\item 
\hypertarget{c-icap-java_8c_a52501e8a8e2d6e6cc9757f3878aaefaf}{const char $\ast$ {\bfseries J\+A\+V\+A\+\_\+\+C\+L\+A\+S\+S\+\_\+\+P\+A\+T\+H}}\label{c-icap-java_8c_a52501e8a8e2d6e6cc9757f3878aaefaf}

\item 
\hypertarget{c-icap-java_8c_aeb500a8d91ef3c7b5efb07f3d7f02b7f}{const char $\ast$ {\bfseries J\+A\+V\+A\+\_\+\+L\+I\+B\+R\+A\+R\+Y\+\_\+\+P\+A\+T\+H}}\label{c-icap-java_8c_aeb500a8d91ef3c7b5efb07f3d7f02b7f}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
c-\/icap module for java handler 

\begin{DoxyAuthor}{Author}
S\+Y\+A-\/\+K\+E 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2014-\/10-\/01 
\end{DoxyDate}


\subsection{Function Documentation}
\hypertarget{c-icap-java_8c_a8608028d6507eaa054dbfdda13263da9}{\index{c-\/icap-\/java.\+c@{c-\/icap-\/java.\+c}!init\+\_\+java\+\_\+handler@{init\+\_\+java\+\_\+handler}}
\index{init\+\_\+java\+\_\+handler@{init\+\_\+java\+\_\+handler}!c-\/icap-\/java.\+c@{c-\/icap-\/java.\+c}}
\subsubsection[{init\+\_\+java\+\_\+handler}]{\setlength{\rightskip}{0pt plus 5cm}int init\+\_\+java\+\_\+handler (
\begin{DoxyParamCaption}
\item[{struct ci\+\_\+server\+\_\+conf $\ast$}]{server\+\_\+conf}
\end{DoxyParamCaption}
)}}\label{c-icap-java_8c_a8608028d6507eaa054dbfdda13263da9}
Called When c-\/icap proccess start.~\newline
 prev = none~\newline
 next = \hyperlink{c-icap-java_8c_ac0e05d829e840acc75d0980ae4a51bd5}{load\+\_\+java\+\_\+module(char $\ast$ service\+\_\+file)}~\newline


\begin{DoxySeeAlso}{See also}
\hyperlink{c-icap-java_8c_ac0e05d829e840acc75d0980ae4a51bd5}{load\+\_\+java\+\_\+module(char $\ast$ service\+\_\+file)} 
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em server\+\_\+conf} & a pointer to the server configurations. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
C\+I\+\_\+\+O\+K 
\end{DoxyReturn}
\hypertarget{c-icap-java_8c_aab52a5dff6e8d20196700fe42bb32d16}{\index{c-\/icap-\/java.\+c@{c-\/icap-\/java.\+c}!java\+\_\+check\+\_\+preview\+\_\+handler@{java\+\_\+check\+\_\+preview\+\_\+handler}}
\index{java\+\_\+check\+\_\+preview\+\_\+handler@{java\+\_\+check\+\_\+preview\+\_\+handler}!c-\/icap-\/java.\+c@{c-\/icap-\/java.\+c}}
\subsubsection[{java\+\_\+check\+\_\+preview\+\_\+handler}]{\setlength{\rightskip}{0pt plus 5cm}int java\+\_\+check\+\_\+preview\+\_\+handler (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{preview\+\_\+data, }
\item[{int}]{preview\+\_\+data\+\_\+len, }
\item[{ci\+\_\+request\+\_\+t $\ast$}]{req}
\end{DoxyParamCaption}
)}}\label{c-icap-java_8c_aab52a5dff6e8d20196700fe42bb32d16}
Preview H\+T\+T\+P Body and determine hook or unlock the request.~\newline
 prev = \hyperlink{c-icap-java_8c_aa8e4298bbc55ca26285ae6d809d04757}{java\+\_\+init\+\_\+request\+\_\+data(ci\+\_\+request\+\_\+t $\ast$ req)}~\newline
 M\+O\+D\+\_\+\+C\+O\+N\+T\+I\+N\+U\+E = \hyperlink{c-icap-java_8c_aad97b7706dcf8f8548285de4f9cba49a}{java\+\_\+service\+\_\+io(char $\ast$ wbuf, int $\ast$ wlen, char $\ast$ rbuf, int $\ast$ rlen, int iseof, ci\+\_\+request\+\_\+t $\ast$ req)}~\newline
 A\+L\+L\+O\+W204 = \hyperlink{c-icap-java_8c_a757cc7a55bf2ec3cb4720e757ac18005}{java\+\_\+release\+\_\+request\+\_\+data(void $\ast$ data)}~\newline


\begin{DoxySeeAlso}{See also}
\hyperlink{c-icap-java_8c_aa8e4298bbc55ca26285ae6d809d04757}{java\+\_\+init\+\_\+request\+\_\+data(ci\+\_\+request\+\_\+t $\ast$ req)} 

\hyperlink{c-icap-java_8c_aad97b7706dcf8f8548285de4f9cba49a}{java\+\_\+service\+\_\+io(char $\ast$ wbuf, int $\ast$ wlen, char $\ast$ rbuf, int $\ast$ rlen, int iseof, ci\+\_\+request\+\_\+t $\ast$ req)} 

\hyperlink{c-icap-java_8c_a757cc7a55bf2ec3cb4720e757ac18005}{java\+\_\+release\+\_\+request\+\_\+data(void $\ast$ data)} 
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em preview\+\_\+data} & preview body. \\
\hline
{\em preview\+\_\+data\+\_\+len} & preview body byte length. \\
\hline
{\em req} & a pointer of request data. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
C\+I\+\_\+\+M\+O\+D\+\_\+\+A\+L\+L\+O\+W204 if unhook the request. C\+I\+\_\+\+M\+O\+D\+\_\+\+C\+O\+N\+T\+I\+N\+U\+E if hook the request. 
\end{DoxyReturn}
\hypertarget{c-icap-java_8c_a6e0dd60d19e7bcafde11ee9fb4c81d4c}{\index{c-\/icap-\/java.\+c@{c-\/icap-\/java.\+c}!java\+\_\+close\+\_\+service@{java\+\_\+close\+\_\+service}}
\index{java\+\_\+close\+\_\+service@{java\+\_\+close\+\_\+service}!c-\/icap-\/java.\+c@{c-\/icap-\/java.\+c}}
\subsubsection[{java\+\_\+close\+\_\+service}]{\setlength{\rightskip}{0pt plus 5cm}void java\+\_\+close\+\_\+service (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{c-icap-java_8c_a6e0dd60d19e7bcafde11ee9fb4c81d4c}
close service.~\newline
 ~\newline
 prev = S\+T\+O\+P S\+I\+G\+N\+A\+L F\+R\+O\+M P\+I\+P\+E or S\+I\+G\+T\+E\+R\+M?~\newline
 next = \hyperlink{c-icap-java_8c_a92dca6f4495d51ed83d22cbd9d96d143}{release\+\_\+java\+\_\+handler()}~\newline


\begin{DoxySeeAlso}{See also}
\hyperlink{c-icap-java_8c_a92dca6f4495d51ed83d22cbd9d96d143}{release\+\_\+java\+\_\+handler()} 
\end{DoxySeeAlso}
\hypertarget{c-icap-java_8c_a7ba64ed6445f034ba77bec0dffee7bc7}{\index{c-\/icap-\/java.\+c@{c-\/icap-\/java.\+c}!java\+\_\+end\+\_\+of\+\_\+data\+\_\+handler@{java\+\_\+end\+\_\+of\+\_\+data\+\_\+handler}}
\index{java\+\_\+end\+\_\+of\+\_\+data\+\_\+handler@{java\+\_\+end\+\_\+of\+\_\+data\+\_\+handler}!c-\/icap-\/java.\+c@{c-\/icap-\/java.\+c}}
\subsubsection[{java\+\_\+end\+\_\+of\+\_\+data\+\_\+handler}]{\setlength{\rightskip}{0pt plus 5cm}int java\+\_\+end\+\_\+of\+\_\+data\+\_\+handler (
\begin{DoxyParamCaption}
\item[{ci\+\_\+request\+\_\+t $\ast$}]{req}
\end{DoxyParamCaption}
)}}\label{c-icap-java_8c_a7ba64ed6445f034ba77bec0dffee7bc7}
Called when if wlen == C\+I\+\_\+\+E\+O\+F in \hyperlink{c-icap-java_8c_aad97b7706dcf8f8548285de4f9cba49a}{java\+\_\+service\+\_\+io(char $\ast$ wbuf, int $\ast$ wlen, char $\ast$ rbuf, int $\ast$ rlen, int iseof, ci\+\_\+request\+\_\+t $\ast$ req)}~\newline
 prev = \hyperlink{c-icap-java_8c_aad97b7706dcf8f8548285de4f9cba49a}{java\+\_\+service\+\_\+io(char $\ast$ wbuf, int $\ast$ wlen, char $\ast$ rbuf, int $\ast$ rlen, int iseof, ci\+\_\+request\+\_\+t $\ast$ req)}~\newline
 next = \hyperlink{c-icap-java_8c_a757cc7a55bf2ec3cb4720e757ac18005}{java\+\_\+release\+\_\+request\+\_\+data(void $\ast$ data)}~\newline


\begin{DoxySeeAlso}{See also}
\hyperlink{c-icap-java_8c_aad97b7706dcf8f8548285de4f9cba49a}{java\+\_\+service\+\_\+io(char $\ast$ wbuf, int $\ast$ wlen, char $\ast$ rbuf, int $\ast$ rlen, int iseof, ci\+\_\+request\+\_\+t $\ast$ req)} 

\hyperlink{c-icap-java_8c_a757cc7a55bf2ec3cb4720e757ac18005}{java\+\_\+release\+\_\+request\+\_\+data(void $\ast$ data)} 
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em req} & a pointer of request data. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
C\+I\+\_\+\+O\+K if continue modification, C\+I\+\_\+\+M\+O\+D\+\_\+\+D\+O\+N\+E if modification has done 
\end{DoxyReturn}
\hypertarget{c-icap-java_8c_aa8e4298bbc55ca26285ae6d809d04757}{\index{c-\/icap-\/java.\+c@{c-\/icap-\/java.\+c}!java\+\_\+init\+\_\+request\+\_\+data@{java\+\_\+init\+\_\+request\+\_\+data}}
\index{java\+\_\+init\+\_\+request\+\_\+data@{java\+\_\+init\+\_\+request\+\_\+data}!c-\/icap-\/java.\+c@{c-\/icap-\/java.\+c}}
\subsubsection[{java\+\_\+init\+\_\+request\+\_\+data}]{\setlength{\rightskip}{0pt plus 5cm}void $\ast$ java\+\_\+init\+\_\+request\+\_\+data (
\begin{DoxyParamCaption}
\item[{ci\+\_\+request\+\_\+t $\ast$}]{req}
\end{DoxyParamCaption}
)}}\label{c-icap-java_8c_aa8e4298bbc55ca26285ae6d809d04757}
initialize I\+C\+A\+P Request.~\newline
 prev = recv Request~\newline
 next = \hyperlink{c-icap-java_8c_aab52a5dff6e8d20196700fe42bb32d16}{java\+\_\+check\+\_\+preview\+\_\+handler(char $\ast$ preview\+\_\+data, int preview\+\_\+data\+\_\+len, ci\+\_\+request\+\_\+t $\ast$ req)}~\newline


\begin{DoxySeeAlso}{See also}
\hyperlink{c-icap-java_8c_aab52a5dff6e8d20196700fe42bb32d16}{java\+\_\+check\+\_\+preview\+\_\+handler(char $\ast$ preview\+\_\+data, int preview\+\_\+data\+\_\+len, ci\+\_\+request\+\_\+t $\ast$ req)} 
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em req} & a pointer of request data. \\
\hline
\end{DoxyParams}
\hypertarget{c-icap-java_8c_a09348decf68c68ed0e477f4ead7d758f}{\index{c-\/icap-\/java.\+c@{c-\/icap-\/java.\+c}!java\+\_\+init\+\_\+service@{java\+\_\+init\+\_\+service}}
\index{java\+\_\+init\+\_\+service@{java\+\_\+init\+\_\+service}!c-\/icap-\/java.\+c@{c-\/icap-\/java.\+c}}
\subsubsection[{java\+\_\+init\+\_\+service}]{\setlength{\rightskip}{0pt plus 5cm}int java\+\_\+init\+\_\+service (
\begin{DoxyParamCaption}
\item[{ci\+\_\+service\+\_\+xdata\+\_\+t $\ast$}]{srv\+\_\+xdata, }
\item[{struct ci\+\_\+server\+\_\+conf $\ast$}]{server\+\_\+conf}
\end{DoxyParamCaption}
)}}\label{c-icap-java_8c_a09348decf68c68ed0e477f4ead7d758f}
Called after \hyperlink{c-icap-java_8c_ac0e05d829e840acc75d0980ae4a51bd5}{load\+\_\+java\+\_\+module(char $\ast$ service\+\_\+file)} .~\newline
 initialize service O\+P\+T\+I\+O\+N\+S parameter.~\newline
 prev = \hyperlink{c-icap-java_8c_ac0e05d829e840acc75d0980ae4a51bd5}{load\+\_\+java\+\_\+module(char $\ast$ service\+\_\+file)}~\newline
 next =\hyperlink{c-icap-java_8c_a472cf4c2c9280417823c49e3919bbf9b}{post\+\_\+init\+\_\+java\+\_\+handler(struct ci\+\_\+server\+\_\+conf $\ast$ server\+\_\+conf)}~\newline



\begin{DoxyParams}{Parameters}
{\em srv\+\_\+xdata} & a pointer holds service parameter. \\
\hline
{\em server\+\_\+conf} & a pointer of server config. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
C\+I\+\_\+\+S\+E\+R\+V\+I\+C\+E\+\_\+\+O\+K 
\end{DoxyReturn}
\hypertarget{c-icap-java_8c_a45697ae9db4c5c4e3c5573fc0add243a}{\index{c-\/icap-\/java.\+c@{c-\/icap-\/java.\+c}!java\+\_\+post\+\_\+init\+\_\+service@{java\+\_\+post\+\_\+init\+\_\+service}}
\index{java\+\_\+post\+\_\+init\+\_\+service@{java\+\_\+post\+\_\+init\+\_\+service}!c-\/icap-\/java.\+c@{c-\/icap-\/java.\+c}}
\subsubsection[{java\+\_\+post\+\_\+init\+\_\+service}]{\setlength{\rightskip}{0pt plus 5cm}int java\+\_\+post\+\_\+init\+\_\+service (
\begin{DoxyParamCaption}
\item[{ci\+\_\+service\+\_\+xdata\+\_\+t $\ast$}]{srv\+\_\+xdata, }
\item[{struct ci\+\_\+server\+\_\+conf $\ast$}]{server\+\_\+conf}
\end{DoxyParamCaption}
)}}\label{c-icap-java_8c_a45697ae9db4c5c4e3c5573fc0add243a}
initialize service O\+P\+T\+I\+O\+N\+S parameter after \hyperlink{c-icap-java_8c_a472cf4c2c9280417823c49e3919bbf9b}{post\+\_\+init\+\_\+java\+\_\+handler(struct ci\+\_\+server\+\_\+conf $\ast$ server\+\_\+conf)} called.~\newline
 prev = \hyperlink{c-icap-java_8c_a472cf4c2c9280417823c49e3919bbf9b}{post\+\_\+init\+\_\+java\+\_\+handler(struct ci\+\_\+server\+\_\+conf $\ast$ server\+\_\+conf)}~\newline
 next = S\+E\+R\+V\+I\+C\+E I\+N~\newline


\begin{DoxySeeAlso}{See also}
\hyperlink{c-icap-java_8c_a472cf4c2c9280417823c49e3919bbf9b}{post\+\_\+init\+\_\+java\+\_\+handler(struct ci\+\_\+server\+\_\+conf $\ast$ server\+\_\+conf)} 
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em srv\+\_\+xdata} & a pointer holds service parameter. \\
\hline
{\em server\+\_\+conf} & a pointer of server config. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
C\+I\+\_\+\+S\+E\+R\+V\+I\+C\+E\+\_\+\+O\+K 
\end{DoxyReturn}
\hypertarget{c-icap-java_8c_a757cc7a55bf2ec3cb4720e757ac18005}{\index{c-\/icap-\/java.\+c@{c-\/icap-\/java.\+c}!java\+\_\+release\+\_\+request\+\_\+data@{java\+\_\+release\+\_\+request\+\_\+data}}
\index{java\+\_\+release\+\_\+request\+\_\+data@{java\+\_\+release\+\_\+request\+\_\+data}!c-\/icap-\/java.\+c@{c-\/icap-\/java.\+c}}
\subsubsection[{java\+\_\+release\+\_\+request\+\_\+data}]{\setlength{\rightskip}{0pt plus 5cm}void java\+\_\+release\+\_\+request\+\_\+data (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{data}
\end{DoxyParamCaption}
)}}\label{c-icap-java_8c_a757cc7a55bf2ec3cb4720e757ac18005}
finalize I\+C\+A\+P request.~\newline
 prev = \hyperlink{c-icap-java_8c_a7ba64ed6445f034ba77bec0dffee7bc7}{java\+\_\+end\+\_\+of\+\_\+data\+\_\+handler(ci\+\_\+request\+\_\+t $\ast$ req)}~\newline
 next = send Request~\newline


\begin{DoxySeeAlso}{See also}
\hyperlink{c-icap-java_8c_a7ba64ed6445f034ba77bec0dffee7bc7}{java\+\_\+end\+\_\+of\+\_\+data\+\_\+handler(ci\+\_\+request\+\_\+t $\ast$ req)} 
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em data} & service\+\_\+data \\
\hline
\end{DoxyParams}
\hypertarget{c-icap-java_8c_aad97b7706dcf8f8548285de4f9cba49a}{\index{c-\/icap-\/java.\+c@{c-\/icap-\/java.\+c}!java\+\_\+service\+\_\+io@{java\+\_\+service\+\_\+io}}
\index{java\+\_\+service\+\_\+io@{java\+\_\+service\+\_\+io}!c-\/icap-\/java.\+c@{c-\/icap-\/java.\+c}}
\subsubsection[{java\+\_\+service\+\_\+io}]{\setlength{\rightskip}{0pt plus 5cm}int java\+\_\+service\+\_\+io (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{wbuf, }
\item[{int $\ast$}]{wlen, }
\item[{char $\ast$}]{rbuf, }
\item[{int $\ast$}]{rlen, }
\item[{int}]{iseof, }
\item[{ci\+\_\+request\+\_\+t $\ast$}]{req}
\end{DoxyParamCaption}
)}}\label{c-icap-java_8c_aad97b7706dcf8f8548285de4f9cba49a}
send-\/recv I\+C\+A\+P Request body buffer.~\newline
 prev = \hyperlink{c-icap-java_8c_aab52a5dff6e8d20196700fe42bb32d16}{java\+\_\+check\+\_\+preview\+\_\+handler(char $\ast$ preview\+\_\+data, int preview\+\_\+data\+\_\+len, ci\+\_\+request\+\_\+t $\ast$ req)} or \hyperlink{c-icap-java_8c_aad97b7706dcf8f8548285de4f9cba49a}{java\+\_\+service\+\_\+io(char $\ast$ wbuf, int $\ast$ wlen, char $\ast$ rbuf, int $\ast$ rlen, int iseof, ci\+\_\+request\+\_\+t $\ast$ req)}~\newline
 next = \hyperlink{c-icap-java_8c_a7ba64ed6445f034ba77bec0dffee7bc7}{java\+\_\+end\+\_\+of\+\_\+data\+\_\+handler(ci\+\_\+request\+\_\+t $\ast$ req)} or \hyperlink{c-icap-java_8c_aad97b7706dcf8f8548285de4f9cba49a}{java\+\_\+service\+\_\+io(char $\ast$ wbuf, int $\ast$ wlen, char $\ast$ rbuf, int $\ast$ rlen, int iseof, ci\+\_\+request\+\_\+t $\ast$ req)}~\newline
 jumps = \hyperlink{c-icap-java_8c_a757cc7a55bf2ec3cb4720e757ac18005}{java\+\_\+release\+\_\+request\+\_\+data(void $\ast$ data)} when return C\+I\+\_\+\+M\+O\+D\+\_\+\+A\+L\+L\+O\+W204~\newline
 ~\newline
 Calls \hyperlink{c-icap-java_8c_a7ba64ed6445f034ba77bec0dffee7bc7}{java\+\_\+end\+\_\+of\+\_\+data\+\_\+handler(ci\+\_\+request\+\_\+t $\ast$ req)} when iseof is true.~\newline
 Calls \hyperlink{c-icap-java_8c_aad97b7706dcf8f8548285de4f9cba49a}{java\+\_\+service\+\_\+io(char $\ast$ wbuf, int $\ast$ wlen, char $\ast$ rbuf, int $\ast$ rlen, int iseof, ci\+\_\+request\+\_\+t $\ast$ req)} recursively while iseof is not true.~\newline


\begin{DoxySeeAlso}{See also}
\hyperlink{c-icap-java_8c_aab52a5dff6e8d20196700fe42bb32d16}{java\+\_\+check\+\_\+preview\+\_\+handler(char $\ast$ preview\+\_\+data, int preview\+\_\+data\+\_\+len, ci\+\_\+request\+\_\+t $\ast$ req)} 

\hyperlink{c-icap-java_8c_aad97b7706dcf8f8548285de4f9cba49a}{java\+\_\+service\+\_\+io(char $\ast$ wbuf, int $\ast$ wlen, char $\ast$ rbuf, int $\ast$ rlen, int iseof, ci\+\_\+request\+\_\+t $\ast$ req)} 

\hyperlink{c-icap-java_8c_a7ba64ed6445f034ba77bec0dffee7bc7}{java\+\_\+end\+\_\+of\+\_\+data\+\_\+handler(ci\+\_\+request\+\_\+t $\ast$ req)} 
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em wbuf} & buffer to write body to send \\
\hline
{\em wlen} & a pointer of wbuf byte length \\
\hline
{\em rbuf} & buffer to write body to recv \\
\hline
{\em rlen} & a pointer of rbug byte length \\
\hline
{\em iseof} & identify end of body \\
\hline
{\em req} & a pointer of request data. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
C\+I\+\_\+\+O\+K if modification is ok. (if $\ast$wlen equals C\+I\+\_\+\+E\+O\+F then modification is O\+K and no write anymore) 
\end{DoxyReturn}
\hypertarget{c-icap-java_8c_a2de36ee3aca6f4adfb39b1b77ae64025}{\index{c-\/icap-\/java.\+c@{c-\/icap-\/java.\+c}!kill\+V\+M@{kill\+V\+M}}
\index{kill\+V\+M@{kill\+V\+M}!c-\/icap-\/java.\+c@{c-\/icap-\/java.\+c}}
\subsubsection[{kill\+V\+M}]{\setlength{\rightskip}{0pt plus 5cm}int kill\+V\+M (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{data, }
\item[{const char $\ast$}]{name, }
\item[{const void $\ast$}]{value}
\end{DoxyParamCaption}
)}}\label{c-icap-java_8c_a2de36ee3aca6f4adfb39b1b77ae64025}
kills J\+V\+M. used at \hyperlink{c-icap-java_8c_a92dca6f4495d51ed83d22cbd9d96d143}{release\+\_\+java\+\_\+handler()} .~\newline


\begin{DoxySeeAlso}{See also}
\hyperlink{c-icap-java_8c_a92dca6f4495d51ed83d22cbd9d96d143}{release\+\_\+java\+\_\+handler()} 
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em data} & \\
\hline
{\em name} & \\
\hline
{\em value} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
J\+N\+I\+\_\+\+O\+K = 0 if success 
\end{DoxyReturn}
\hypertarget{c-icap-java_8c_ac0e05d829e840acc75d0980ae4a51bd5}{\index{c-\/icap-\/java.\+c@{c-\/icap-\/java.\+c}!load\+\_\+java\+\_\+module@{load\+\_\+java\+\_\+module}}
\index{load\+\_\+java\+\_\+module@{load\+\_\+java\+\_\+module}!c-\/icap-\/java.\+c@{c-\/icap-\/java.\+c}}
\subsubsection[{load\+\_\+java\+\_\+module}]{\setlength{\rightskip}{0pt plus 5cm}ci\+\_\+service\+\_\+module\+\_\+t $\ast$ load\+\_\+java\+\_\+module (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{service\+\_\+file}
\end{DoxyParamCaption}
)}}\label{c-icap-java_8c_ac0e05d829e840acc75d0980ae4a51bd5}
Called by each service scripts. initialize J\+V\+M.~\newline
 prev = \hyperlink{c-icap-java_8c_a8608028d6507eaa054dbfdda13263da9}{init\+\_\+java\+\_\+handler(struct ci\+\_\+server\+\_\+conf $\ast$ server\+\_\+conf)}~\newline
 next = \hyperlink{c-icap-java_8c_a09348decf68c68ed0e477f4ead7d758f}{java\+\_\+init\+\_\+service(ci\+\_\+service\+\_\+xdata\+\_\+t $\ast$ srv\+\_\+xdata, struct ci\+\_\+server\+\_\+conf $\ast$ server\+\_\+conf)}~\newline


\begin{DoxySeeAlso}{See also}
\hyperlink{c-icap-java_8c_a8608028d6507eaa054dbfdda13263da9}{init\+\_\+java\+\_\+handler(struct ci\+\_\+server\+\_\+conf $\ast$ server\+\_\+conf)} 

\hyperlink{c-icap-java_8c_a09348decf68c68ed0e477f4ead7d758f}{java\+\_\+init\+\_\+service(ci\+\_\+service\+\_\+xdata\+\_\+t $\ast$ srv\+\_\+xdata, struct ci\+\_\+server\+\_\+conf $\ast$ server\+\_\+conf)} 
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em service\+\_\+file} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}

\end{DoxyReturn}
\hypertarget{c-icap-java_8c_a472cf4c2c9280417823c49e3919bbf9b}{\index{c-\/icap-\/java.\+c@{c-\/icap-\/java.\+c}!post\+\_\+init\+\_\+java\+\_\+handler@{post\+\_\+init\+\_\+java\+\_\+handler}}
\index{post\+\_\+init\+\_\+java\+\_\+handler@{post\+\_\+init\+\_\+java\+\_\+handler}!c-\/icap-\/java.\+c@{c-\/icap-\/java.\+c}}
\subsubsection[{post\+\_\+init\+\_\+java\+\_\+handler}]{\setlength{\rightskip}{0pt plus 5cm}int post\+\_\+init\+\_\+java\+\_\+handler (
\begin{DoxyParamCaption}
\item[{struct ci\+\_\+server\+\_\+conf $\ast$}]{server\+\_\+conf}
\end{DoxyParamCaption}
)}}\label{c-icap-java_8c_a472cf4c2c9280417823c49e3919bbf9b}
Called When all c-\/icap-\/java services's \char`\"{}java\+\_\+init\+\_\+service(ci\+\_\+service\+\_\+xdata\+\_\+t $\ast$ srv\+\_\+xdata, struct ci\+\_\+server\+\_\+conf $\ast$ server\+\_\+conf)\char`\"{} has called.~\newline
 prev = \hyperlink{c-icap-java_8c_a09348decf68c68ed0e477f4ead7d758f}{java\+\_\+init\+\_\+service(ci\+\_\+service\+\_\+xdata\+\_\+t $\ast$ srv\+\_\+xdata, struct ci\+\_\+server\+\_\+conf $\ast$ server\+\_\+conf)}~\newline
 next = \hyperlink{c-icap-java_8c_a45697ae9db4c5c4e3c5573fc0add243a}{java\+\_\+post\+\_\+init\+\_\+service(ci\+\_\+service\+\_\+xdata\+\_\+t $\ast$ srv\+\_\+xdata, struct ci\+\_\+server\+\_\+conf $\ast$ server\+\_\+conf)}~\newline


\begin{DoxySeeAlso}{See also}
\hyperlink{c-icap-java_8c_a09348decf68c68ed0e477f4ead7d758f}{java\+\_\+init\+\_\+service(ci\+\_\+service\+\_\+xdata\+\_\+t $\ast$ srv\+\_\+xdata, struct ci\+\_\+server\+\_\+conf $\ast$ server\+\_\+conf)} 

\hyperlink{c-icap-java_8c_a45697ae9db4c5c4e3c5573fc0add243a}{java\+\_\+post\+\_\+init\+\_\+service(ci\+\_\+service\+\_\+xdata\+\_\+t $\ast$ srv\+\_\+xdata, struct ci\+\_\+server\+\_\+conf $\ast$ server\+\_\+conf)} 
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em server\+\_\+conf} & a pointer to the server configurations. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
C\+I\+\_\+\+O\+K 
\end{DoxyReturn}
\hypertarget{c-icap-java_8c_a92dca6f4495d51ed83d22cbd9d96d143}{\index{c-\/icap-\/java.\+c@{c-\/icap-\/java.\+c}!release\+\_\+java\+\_\+handler@{release\+\_\+java\+\_\+handler}}
\index{release\+\_\+java\+\_\+handler@{release\+\_\+java\+\_\+handler}!c-\/icap-\/java.\+c@{c-\/icap-\/java.\+c}}
\subsubsection[{release\+\_\+java\+\_\+handler}]{\setlength{\rightskip}{0pt plus 5cm}void release\+\_\+java\+\_\+handler (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{c-icap-java_8c_a92dca6f4495d51ed83d22cbd9d96d143}
Call \hyperlink{c-icap-java_8c_a2de36ee3aca6f4adfb39b1b77ae64025}{kill\+V\+M(void $\ast$data, const char $\ast$name, const void $\ast$ value)} to each J\+V\+Ms.~\newline
 prev = \hyperlink{c-icap-java_8c_a6e0dd60d19e7bcafde11ee9fb4c81d4c}{java\+\_\+close\+\_\+service()}~\newline
 next = none.~\newline


\begin{DoxySeeAlso}{See also}
\hyperlink{c-icap-java_8c_a6e0dd60d19e7bcafde11ee9fb4c81d4c}{java\+\_\+close\+\_\+service()} 
\end{DoxySeeAlso}


\subsection{Variable Documentation}
\hypertarget{c-icap-java_8c_a13726af7b2896986044c777506196c76}{\index{c-\/icap-\/java.\+c@{c-\/icap-\/java.\+c}!module@{module}}
\index{module@{module}!c-\/icap-\/java.\+c@{c-\/icap-\/java.\+c}}
\subsubsection[{module}]{\setlength{\rightskip}{0pt plus 5cm}C\+I\+\_\+\+D\+E\+C\+L\+A\+R\+E\+\_\+\+D\+A\+T\+A service\+\_\+handler\+\_\+module\+\_\+t module}}\label{c-icap-java_8c_a13726af7b2896986044c777506196c76}
{\bfseries Initial value\+:}
\begin{DoxyCode}
= \{
    \textcolor{stringliteral}{"java\_handler"},
    \textcolor{stringliteral}{".class"},
    \hyperlink{c-icap-java_8c_a8608028d6507eaa054dbfdda13263da9}{init\_java\_handler},
    \hyperlink{c-icap-java_8c_a472cf4c2c9280417823c49e3919bbf9b}{post\_init\_java\_handler},
    \hyperlink{c-icap-java_8c_a92dca6f4495d51ed83d22cbd9d96d143}{release\_java\_handler},
    \hyperlink{c-icap-java_8c_ac0e05d829e840acc75d0980ae4a51bd5}{load\_java\_module},
    NULL 
\}
\end{DoxyCode}
Declare c-\/icap module handler.~\newline
 ~\newline
 T\+O L\+O\+A\+D\+: {\bfseries Module service\+\_\+handler srv\+\_\+java.\+so} 