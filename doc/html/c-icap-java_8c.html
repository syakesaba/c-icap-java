<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>c-icap-java: src/modules/java/c-icap-java.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">c-icap-java
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_ddb4d7e95cc2d6c8e1ade10a20d7247d.html">modules</a></li><li class="navelem"><a class="el" href="dir_76fbcaa1e43f5be914bc8207f5606748.html">java</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">c-icap-java.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>c-icap module for java handler  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &quot;jni.h&quot;</code><br />
<code>#include &quot;c_icap/c-icap.h&quot;</code><br />
<code>#include &quot;c_icap/service.h&quot;</code><br />
<code>#include &quot;c_icap/module.h&quot;</code><br />
<code>#include &quot;c_icap/header.h&quot;</code><br />
<code>#include &quot;c_icap/body.h&quot;</code><br />
<code>#include &quot;c_icap/simple_api.h&quot;</code><br />
<code>#include &quot;c_icap/debug.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structj_data_struct.html">jDataStruct</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structj_service_data_struct.html">jServiceDataStruct</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ab367ee8760db972006b62725295661cd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab367ee8760db972006b62725295661cd"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CIJ_ERROR_LEVEL</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:ab367ee8760db972006b62725295661cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ef2d46d7ed8867a30fe802d07e20571"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8ef2d46d7ed8867a30fe802d07e20571"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CIJ_WARN_LEVEL</b>&#160;&#160;&#160;3</td></tr>
<tr class="separator:a8ef2d46d7ed8867a30fe802d07e20571"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af836531b96b53ace27bb64a9a4bd0b11"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af836531b96b53ace27bb64a9a4bd0b11"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CIJ_MESSAGE_LEVEL</b>&#160;&#160;&#160;5</td></tr>
<tr class="separator:af836531b96b53ace27bb64a9a4bd0b11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a109eedc732646aaff59049f2dbb4ae9c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a109eedc732646aaff59049f2dbb4ae9c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CIJ_INFO_LEVEL</b>&#160;&#160;&#160;7</td></tr>
<tr class="separator:a109eedc732646aaff59049f2dbb4ae9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f05f1bc20d887fd6e78bcb7eb4bd715"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9f05f1bc20d887fd6e78bcb7eb4bd715"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CIJ_DEBUG_LEVEL</b>&#160;&#160;&#160;CI_DEBUG_LEVEL</td></tr>
<tr class="separator:a9f05f1bc20d887fd6e78bcb7eb4bd715"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcb9f48a8b94e3103fb9c74c57a3ceff"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abcb9f48a8b94e3103fb9c74c57a3ceff"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>cij_debug_printf</b>(lev, msg,...)&#160;&#160;&#160;ci_debug_printf(1, &quot;(%d):%s():L%04d: &quot;msg&quot;\n&quot;, getpid(), __func__, __LINE__, ## __VA_ARGS__)</td></tr>
<tr class="separator:abcb9f48a8b94e3103fb9c74c57a3ceff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0f5d10e300c2541ddf444ce17970eac"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa0f5d10e300c2541ddf444ce17970eac"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_JVM_OPTIONS</b>&#160;&#160;&#160;4</td></tr>
<tr class="separator:aa0f5d10e300c2541ddf444ce17970eac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32edc6d3772795c010edf7dfca20d368"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a32edc6d3772795c010edf7dfca20d368"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_ENVIRONMENTS_SIZE</b>&#160;&#160;&#160;256</td></tr>
<tr class="separator:a32edc6d3772795c010edf7dfca20d368"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01981b820f93d8b5cc748cd6d45d065a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a01981b820f93d8b5cc748cd6d45d065a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CIJ_CLASS_MOD_TYPE</b>&#160;&#160;&#160;&quot;MOD_TYPE&quot;</td></tr>
<tr class="separator:a01981b820f93d8b5cc748cd6d45d065a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a170722895fb8b557e85e1445db641676"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a170722895fb8b557e85e1445db641676"></a>
typedef struct <a class="el" href="structj_data_struct.html">jDataStruct</a>&#160;</td><td class="memItemRight" valign="bottom"><b>jData_t</b></td></tr>
<tr class="separator:a170722895fb8b557e85e1445db641676"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37e1c2a527fdd42e6dd88c45441bdf0c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a37e1c2a527fdd42e6dd88c45441bdf0c"></a>
typedef struct <a class="el" href="structj_service_data_struct.html">jServiceDataStruct</a>&#160;</td><td class="memItemRight" valign="bottom"><b>jServiceData_t</b></td></tr>
<tr class="separator:a37e1c2a527fdd42e6dd88c45441bdf0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8608028d6507eaa054dbfdda13263da9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="c-icap-java_8c.html#a8608028d6507eaa054dbfdda13263da9">init_java_handler</a> (struct ci_server_conf *server_conf)</td></tr>
<tr class="separator:a8608028d6507eaa054dbfdda13263da9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a472cf4c2c9280417823c49e3919bbf9b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="c-icap-java_8c.html#a472cf4c2c9280417823c49e3919bbf9b">post_init_java_handler</a> (struct ci_server_conf *server_conf)</td></tr>
<tr class="separator:a472cf4c2c9280417823c49e3919bbf9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0e05d829e840acc75d0980ae4a51bd5"><td class="memItemLeft" align="right" valign="top">ci_service_module_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="c-icap-java_8c.html#ac0e05d829e840acc75d0980ae4a51bd5">load_java_module</a> (char *service_file)</td></tr>
<tr class="separator:ac0e05d829e840acc75d0980ae4a51bd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92dca6f4495d51ed83d22cbd9d96d143"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="c-icap-java_8c.html#a92dca6f4495d51ed83d22cbd9d96d143">release_java_handler</a> ()</td></tr>
<tr class="separator:a92dca6f4495d51ed83d22cbd9d96d143"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09348decf68c68ed0e477f4ead7d758f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="c-icap-java_8c.html#a09348decf68c68ed0e477f4ead7d758f">java_init_service</a> (ci_service_xdata_t *srv_xdata, struct ci_server_conf *server_conf)</td></tr>
<tr class="separator:a09348decf68c68ed0e477f4ead7d758f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45697ae9db4c5c4e3c5573fc0add243a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="c-icap-java_8c.html#a45697ae9db4c5c4e3c5573fc0add243a">java_post_init_service</a> (ci_service_xdata_t *srv_xdata, struct ci_server_conf *server_conf)</td></tr>
<tr class="separator:a45697ae9db4c5c4e3c5573fc0add243a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e0dd60d19e7bcafde11ee9fb4c81d4c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="c-icap-java_8c.html#a6e0dd60d19e7bcafde11ee9fb4c81d4c">java_close_service</a> ()</td></tr>
<tr class="separator:a6e0dd60d19e7bcafde11ee9fb4c81d4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8e4298bbc55ca26285ae6d809d04757"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="c-icap-java_8c.html#aa8e4298bbc55ca26285ae6d809d04757">java_init_request_data</a> (ci_request_t *req)</td></tr>
<tr class="separator:aa8e4298bbc55ca26285ae6d809d04757"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a757cc7a55bf2ec3cb4720e757ac18005"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="c-icap-java_8c.html#a757cc7a55bf2ec3cb4720e757ac18005">java_release_request_data</a> (void *data)</td></tr>
<tr class="separator:a757cc7a55bf2ec3cb4720e757ac18005"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab52a5dff6e8d20196700fe42bb32d16"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="c-icap-java_8c.html#aab52a5dff6e8d20196700fe42bb32d16">java_check_preview_handler</a> (char *preview_data, int preview_data_len, ci_request_t *req)</td></tr>
<tr class="separator:aab52a5dff6e8d20196700fe42bb32d16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ba64ed6445f034ba77bec0dffee7bc7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="c-icap-java_8c.html#a7ba64ed6445f034ba77bec0dffee7bc7">java_end_of_data_handler</a> (ci_request_t *req)</td></tr>
<tr class="separator:a7ba64ed6445f034ba77bec0dffee7bc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad97b7706dcf8f8548285de4f9cba49a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="c-icap-java_8c.html#aad97b7706dcf8f8548285de4f9cba49a">java_service_io</a> (char *wbuf, int *wlen, char *rbuf, int *rlen, int iseof, ci_request_t *req)</td></tr>
<tr class="separator:aad97b7706dcf8f8548285de4f9cba49a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2de36ee3aca6f4adfb39b1b77ae64025"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="c-icap-java_8c.html#a2de36ee3aca6f4adfb39b1b77ae64025">killVM</a> (void *data, const char *name, const void *value)</td></tr>
<tr class="separator:a2de36ee3aca6f4adfb39b1b77ae64025"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a13726af7b2896986044c777506196c76"><td class="memItemLeft" align="right" valign="top">CI_DECLARE_DATA <br class="typebreak" />
service_handler_module_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="c-icap-java_8c.html#a13726af7b2896986044c777506196c76">module</a></td></tr>
<tr class="separator:a13726af7b2896986044c777506196c76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5569ffeead7850d0eb4861e65a43f54"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab5569ffeead7850d0eb4861e65a43f54"></a>
ci_dyn_array_t *&#160;</td><td class="memItemRight" valign="bottom"><b>enviroments</b></td></tr>
<tr class="separator:ab5569ffeead7850d0eb4861e65a43f54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52501e8a8e2d6e6cc9757f3878aaefaf"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a52501e8a8e2d6e6cc9757f3878aaefaf"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>JAVA_CLASS_PATH</b></td></tr>
<tr class="separator:a52501e8a8e2d6e6cc9757f3878aaefaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb500a8d91ef3c7b5efb07f3d7f02b7f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aeb500a8d91ef3c7b5efb07f3d7f02b7f"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>JAVA_LIBRARY_PATH</b></td></tr>
<tr class="separator:aeb500a8d91ef3c7b5efb07f3d7f02b7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>c-icap module for java handler </p>
<dl class="section author"><dt>Author</dt><dd>SYA-KE </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2014-10-01 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a8608028d6507eaa054dbfdda13263da9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int init_java_handler </td>
          <td>(</td>
          <td class="paramtype">struct ci_server_conf *&#160;</td>
          <td class="paramname"><em>server_conf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Called When c-icap proccess start.<br />
 prev = none<br />
 next = <a class="el" href="c-icap-java_8c.html#ac0e05d829e840acc75d0980ae4a51bd5">load_java_module(char * service_file)</a><br />
</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="c-icap-java_8c.html#ac0e05d829e840acc75d0980ae4a51bd5">load_java_module(char * service_file)</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server_conf</td><td>a pointer to the server configurations. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>CI_OK </dd></dl>

</div>
</div>
<a class="anchor" id="aab52a5dff6e8d20196700fe42bb32d16"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int java_check_preview_handler </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>preview_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>preview_data_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ci_request_t *&#160;</td>
          <td class="paramname"><em>req</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Preview HTTP Body and determine hook or unlock the request.<br />
 prev = <a class="el" href="c-icap-java_8c.html#aa8e4298bbc55ca26285ae6d809d04757">java_init_request_data(ci_request_t * req)</a><br />
 MOD_CONTINUE = <a class="el" href="c-icap-java_8c.html#aad97b7706dcf8f8548285de4f9cba49a">java_service_io(char * wbuf, int * wlen, char * rbuf, int * rlen, int iseof, ci_request_t * req)</a><br />
 ALLOW204 = <a class="el" href="c-icap-java_8c.html#a757cc7a55bf2ec3cb4720e757ac18005">java_release_request_data(void * data)</a><br />
</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="c-icap-java_8c.html#aa8e4298bbc55ca26285ae6d809d04757">java_init_request_data(ci_request_t * req)</a> </dd>
<dd>
<a class="el" href="c-icap-java_8c.html#aad97b7706dcf8f8548285de4f9cba49a">java_service_io(char * wbuf, int * wlen, char * rbuf, int * rlen, int iseof, ci_request_t * req)</a> </dd>
<dd>
<a class="el" href="c-icap-java_8c.html#a757cc7a55bf2ec3cb4720e757ac18005">java_release_request_data(void * data)</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">preview_data</td><td>preview body. </td></tr>
    <tr><td class="paramname">preview_data_len</td><td>preview body byte length. </td></tr>
    <tr><td class="paramname">req</td><td>a pointer of request data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>CI_MOD_ALLOW204 if unhook the request. CI_MOD_CONTINUE if hook the request. </dd></dl>

</div>
</div>
<a class="anchor" id="a6e0dd60d19e7bcafde11ee9fb4c81d4c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void java_close_service </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>close service.<br />
 <br />
 prev = STOP SIGNAL FROM PIPE or SIGTERM?<br />
 next = <a class="el" href="c-icap-java_8c.html#a92dca6f4495d51ed83d22cbd9d96d143">release_java_handler()</a><br />
</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="c-icap-java_8c.html#a92dca6f4495d51ed83d22cbd9d96d143">release_java_handler()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a7ba64ed6445f034ba77bec0dffee7bc7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int java_end_of_data_handler </td>
          <td>(</td>
          <td class="paramtype">ci_request_t *&#160;</td>
          <td class="paramname"><em>req</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Called when if wlen == CI_EOF in <a class="el" href="c-icap-java_8c.html#aad97b7706dcf8f8548285de4f9cba49a">java_service_io(char * wbuf, int * wlen, char * rbuf, int * rlen, int iseof, ci_request_t * req)</a><br />
 prev = <a class="el" href="c-icap-java_8c.html#aad97b7706dcf8f8548285de4f9cba49a">java_service_io(char * wbuf, int * wlen, char * rbuf, int * rlen, int iseof, ci_request_t * req)</a><br />
 next = <a class="el" href="c-icap-java_8c.html#a757cc7a55bf2ec3cb4720e757ac18005">java_release_request_data(void * data)</a><br />
</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="c-icap-java_8c.html#aad97b7706dcf8f8548285de4f9cba49a">java_service_io(char * wbuf, int * wlen, char * rbuf, int * rlen, int iseof, ci_request_t * req)</a> </dd>
<dd>
<a class="el" href="c-icap-java_8c.html#a757cc7a55bf2ec3cb4720e757ac18005">java_release_request_data(void * data)</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">req</td><td>a pointer of request data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>CI_OK if continue modification, CI_MOD_DONE if modification has done </dd></dl>

</div>
</div>
<a class="anchor" id="aa8e4298bbc55ca26285ae6d809d04757"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * java_init_request_data </td>
          <td>(</td>
          <td class="paramtype">ci_request_t *&#160;</td>
          <td class="paramname"><em>req</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>initialize ICAP Request.<br />
 prev = recv Request<br />
 next = <a class="el" href="c-icap-java_8c.html#aab52a5dff6e8d20196700fe42bb32d16">java_check_preview_handler(char * preview_data, int preview_data_len, ci_request_t * req)</a><br />
</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="c-icap-java_8c.html#aab52a5dff6e8d20196700fe42bb32d16">java_check_preview_handler(char * preview_data, int preview_data_len, ci_request_t * req)</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">req</td><td>a pointer of request data. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a09348decf68c68ed0e477f4ead7d758f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int java_init_service </td>
          <td>(</td>
          <td class="paramtype">ci_service_xdata_t *&#160;</td>
          <td class="paramname"><em>srv_xdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct ci_server_conf *&#160;</td>
          <td class="paramname"><em>server_conf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Called after <a class="el" href="c-icap-java_8c.html#ac0e05d829e840acc75d0980ae4a51bd5">load_java_module(char * service_file)</a> .<br />
 initialize service OPTIONS parameter.<br />
 prev = <a class="el" href="c-icap-java_8c.html#ac0e05d829e840acc75d0980ae4a51bd5">load_java_module(char * service_file)</a><br />
 next =<a class="el" href="c-icap-java_8c.html#a472cf4c2c9280417823c49e3919bbf9b">post_init_java_handler(struct ci_server_conf * server_conf)</a><br />
</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">srv_xdata</td><td>a pointer holds service parameter. </td></tr>
    <tr><td class="paramname">server_conf</td><td>a pointer of server config. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>CI_SERVICE_OK </dd></dl>

</div>
</div>
<a class="anchor" id="a45697ae9db4c5c4e3c5573fc0add243a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int java_post_init_service </td>
          <td>(</td>
          <td class="paramtype">ci_service_xdata_t *&#160;</td>
          <td class="paramname"><em>srv_xdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct ci_server_conf *&#160;</td>
          <td class="paramname"><em>server_conf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>initialize service OPTIONS parameter after <a class="el" href="c-icap-java_8c.html#a472cf4c2c9280417823c49e3919bbf9b">post_init_java_handler(struct ci_server_conf * server_conf)</a> called.<br />
 prev = <a class="el" href="c-icap-java_8c.html#a472cf4c2c9280417823c49e3919bbf9b">post_init_java_handler(struct ci_server_conf * server_conf)</a><br />
 next = SERVICE IN<br />
</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="c-icap-java_8c.html#a472cf4c2c9280417823c49e3919bbf9b">post_init_java_handler(struct ci_server_conf * server_conf)</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">srv_xdata</td><td>a pointer holds service parameter. </td></tr>
    <tr><td class="paramname">server_conf</td><td>a pointer of server config. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>CI_SERVICE_OK </dd></dl>

</div>
</div>
<a class="anchor" id="a757cc7a55bf2ec3cb4720e757ac18005"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void java_release_request_data </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>finalize ICAP request.<br />
 prev = <a class="el" href="c-icap-java_8c.html#a7ba64ed6445f034ba77bec0dffee7bc7">java_end_of_data_handler(ci_request_t * req)</a><br />
 next = send Request<br />
</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="c-icap-java_8c.html#a7ba64ed6445f034ba77bec0dffee7bc7">java_end_of_data_handler(ci_request_t * req)</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>service_data </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aad97b7706dcf8f8548285de4f9cba49a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int java_service_io </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>wbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>wlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>rbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>rlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>iseof</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ci_request_t *&#160;</td>
          <td class="paramname"><em>req</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>send-recv ICAP Request body buffer.<br />
 prev = <a class="el" href="c-icap-java_8c.html#aab52a5dff6e8d20196700fe42bb32d16">java_check_preview_handler(char * preview_data, int preview_data_len, ci_request_t * req)</a> or <a class="el" href="c-icap-java_8c.html#aad97b7706dcf8f8548285de4f9cba49a">java_service_io(char * wbuf, int * wlen, char * rbuf, int * rlen, int iseof, ci_request_t * req)</a><br />
 next = <a class="el" href="c-icap-java_8c.html#a7ba64ed6445f034ba77bec0dffee7bc7">java_end_of_data_handler(ci_request_t * req)</a> or <a class="el" href="c-icap-java_8c.html#aad97b7706dcf8f8548285de4f9cba49a">java_service_io(char * wbuf, int * wlen, char * rbuf, int * rlen, int iseof, ci_request_t * req)</a><br />
 jumps = <a class="el" href="c-icap-java_8c.html#a757cc7a55bf2ec3cb4720e757ac18005">java_release_request_data(void * data)</a> when return CI_MOD_ALLOW204<br />
 <br />
 Calls <a class="el" href="c-icap-java_8c.html#a7ba64ed6445f034ba77bec0dffee7bc7">java_end_of_data_handler(ci_request_t * req)</a> when iseof is true.<br />
 Calls <a class="el" href="c-icap-java_8c.html#aad97b7706dcf8f8548285de4f9cba49a">java_service_io(char * wbuf, int * wlen, char * rbuf, int * rlen, int iseof, ci_request_t * req)</a> recursively while iseof is not true.<br />
</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="c-icap-java_8c.html#aab52a5dff6e8d20196700fe42bb32d16">java_check_preview_handler(char * preview_data, int preview_data_len, ci_request_t * req)</a> </dd>
<dd>
<a class="el" href="c-icap-java_8c.html#aad97b7706dcf8f8548285de4f9cba49a">java_service_io(char * wbuf, int * wlen, char * rbuf, int * rlen, int iseof, ci_request_t * req)</a> </dd>
<dd>
<a class="el" href="c-icap-java_8c.html#a7ba64ed6445f034ba77bec0dffee7bc7">java_end_of_data_handler(ci_request_t * req)</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">wbuf</td><td>buffer to write body to send </td></tr>
    <tr><td class="paramname">wlen</td><td>a pointer of wbuf byte length </td></tr>
    <tr><td class="paramname">rbuf</td><td>buffer to write body to recv </td></tr>
    <tr><td class="paramname">rlen</td><td>a pointer of rbug byte length </td></tr>
    <tr><td class="paramname">iseof</td><td>identify end of body </td></tr>
    <tr><td class="paramname">req</td><td>a pointer of request data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>CI_OK if modification is ok. (if *wlen equals CI_EOF then modification is OK and no write anymore) </dd></dl>

</div>
</div>
<a class="anchor" id="a2de36ee3aca6f4adfb39b1b77ae64025"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int killVM </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>kills JVM. used at <a class="el" href="c-icap-java_8c.html#a92dca6f4495d51ed83d22cbd9d96d143">release_java_handler()</a> .<br />
</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="c-icap-java_8c.html#a92dca6f4495d51ed83d22cbd9d96d143">release_java_handler()</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td></td></tr>
    <tr><td class="paramname">name</td><td></td></tr>
    <tr><td class="paramname">value</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>JNI_OK = 0 if success </dd></dl>

</div>
</div>
<a class="anchor" id="ac0e05d829e840acc75d0980ae4a51bd5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ci_service_module_t * load_java_module </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>service_file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Called by each service scripts. initialize JVM.<br />
 prev = <a class="el" href="c-icap-java_8c.html#a8608028d6507eaa054dbfdda13263da9">init_java_handler(struct ci_server_conf * server_conf)</a><br />
 next = <a class="el" href="c-icap-java_8c.html#a09348decf68c68ed0e477f4ead7d758f">java_init_service(ci_service_xdata_t * srv_xdata, struct ci_server_conf * server_conf)</a><br />
</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="c-icap-java_8c.html#a8608028d6507eaa054dbfdda13263da9">init_java_handler(struct ci_server_conf * server_conf)</a> </dd>
<dd>
<a class="el" href="c-icap-java_8c.html#a09348decf68c68ed0e477f4ead7d758f">java_init_service(ci_service_xdata_t * srv_xdata, struct ci_server_conf * server_conf)</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">service_file</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

</div>
</div>
<a class="anchor" id="a472cf4c2c9280417823c49e3919bbf9b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int post_init_java_handler </td>
          <td>(</td>
          <td class="paramtype">struct ci_server_conf *&#160;</td>
          <td class="paramname"><em>server_conf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Called When all c-icap-java services's "java_init_service(ci_service_xdata_t * srv_xdata, struct ci_server_conf * server_conf)" has called.<br />
 prev = <a class="el" href="c-icap-java_8c.html#a09348decf68c68ed0e477f4ead7d758f">java_init_service(ci_service_xdata_t * srv_xdata, struct ci_server_conf * server_conf)</a><br />
 next = <a class="el" href="c-icap-java_8c.html#a45697ae9db4c5c4e3c5573fc0add243a">java_post_init_service(ci_service_xdata_t * srv_xdata, struct ci_server_conf * server_conf)</a><br />
</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="c-icap-java_8c.html#a09348decf68c68ed0e477f4ead7d758f">java_init_service(ci_service_xdata_t * srv_xdata, struct ci_server_conf * server_conf)</a> </dd>
<dd>
<a class="el" href="c-icap-java_8c.html#a45697ae9db4c5c4e3c5573fc0add243a">java_post_init_service(ci_service_xdata_t * srv_xdata, struct ci_server_conf * server_conf)</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server_conf</td><td>a pointer to the server configurations. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>CI_OK </dd></dl>

</div>
</div>
<a class="anchor" id="a92dca6f4495d51ed83d22cbd9d96d143"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void release_java_handler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Call <a class="el" href="c-icap-java_8c.html#a2de36ee3aca6f4adfb39b1b77ae64025">killVM(void *data, const char *name, const void * value)</a> to each JVMs.<br />
 prev = <a class="el" href="c-icap-java_8c.html#a6e0dd60d19e7bcafde11ee9fb4c81d4c">java_close_service()</a><br />
 next = none.<br />
</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="c-icap-java_8c.html#a6e0dd60d19e7bcafde11ee9fb4c81d4c">java_close_service()</a> </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a13726af7b2896986044c777506196c76"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CI_DECLARE_DATA service_handler_module_t module</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    <span class="stringliteral">&quot;java_handler&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;.class&quot;</span>,</div>
<div class="line">    <a class="code" href="c-icap-java_8c.html#a8608028d6507eaa054dbfdda13263da9">init_java_handler</a>,</div>
<div class="line">    <a class="code" href="c-icap-java_8c.html#a472cf4c2c9280417823c49e3919bbf9b">post_init_java_handler</a>,</div>
<div class="line">    <a class="code" href="c-icap-java_8c.html#a92dca6f4495d51ed83d22cbd9d96d143">release_java_handler</a>,</div>
<div class="line">    <a class="code" href="c-icap-java_8c.html#ac0e05d829e840acc75d0980ae4a51bd5">load_java_module</a>,</div>
<div class="line">    NULL </div>
<div class="line">}</div>
<div class="ttc" id="c-icap-java_8c_html_a8608028d6507eaa054dbfdda13263da9"><div class="ttname"><a href="c-icap-java_8c.html#a8608028d6507eaa054dbfdda13263da9">init_java_handler</a></div><div class="ttdeci">int init_java_handler(struct ci_server_conf *server_conf)</div><div class="ttdef"><b>Definition:</b> c-icap-java.c:102</div></div>
<div class="ttc" id="c-icap-java_8c_html_a472cf4c2c9280417823c49e3919bbf9b"><div class="ttname"><a href="c-icap-java_8c.html#a472cf4c2c9280417823c49e3919bbf9b">post_init_java_handler</a></div><div class="ttdeci">int post_init_java_handler(struct ci_server_conf *server_conf)</div><div class="ttdef"><b>Definition:</b> c-icap-java.c:118</div></div>
<div class="ttc" id="c-icap-java_8c_html_a92dca6f4495d51ed83d22cbd9d96d143"><div class="ttname"><a href="c-icap-java_8c.html#a92dca6f4495d51ed83d22cbd9d96d143">release_java_handler</a></div><div class="ttdeci">void release_java_handler()</div><div class="ttdef"><b>Definition:</b> c-icap-java.c:299</div></div>
<div class="ttc" id="c-icap-java_8c_html_ac0e05d829e840acc75d0980ae4a51bd5"><div class="ttname"><a href="c-icap-java_8c.html#ac0e05d829e840acc75d0980ae4a51bd5">load_java_module</a></div><div class="ttdeci">ci_service_module_t * load_java_module(char *service_file)</div><div class="ttdef"><b>Definition:</b> c-icap-java.c:132</div></div>
</div><!-- fragment --><p>Declare c-icap module handler.<br />
 <br />
 TO LOAD: <b>Module service_handler srv_java.so</b> </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Oct 5 2014 19:39:02 for c-icap-java by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
